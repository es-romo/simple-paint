(this["webpackJsonpsimple-paint"]=this["webpackJsonpsimple-paint"]||[]).push([[0],{199:function(t,e,i){},200:function(t,e,i){},201:function(t,e,i){},202:function(t,e,i){},203:function(t,e,i){"use strict";i.r(e);var a,n=i(0),o=i.n(n),s=i(74),c=i.n(s),r=(i(86),i(12));!function(t){t[t.PENCIL=0]="PENCIL",t[t.FILL=1]="FILL"}(a||(a={}));var h=Object(n.createContext)(null),l=Object(n.createContext)(null),u=Object(n.createContext)(null),d=(i(87),i(3));function v(){return Object(d.jsx)("div",{className:"title",children:Object(d.jsx)("h1",{children:"Esteban's Great Simple Paint"})})}i(89);var b=i(75),j=i(76),f=function(){function t(e){Object(b.a)(this,t),this.canvas=void 0,this.ratio=15,this.context=void 0,this.canvas=e.current,this.context=this.canvas.getContext("2d")}return Object(j.a)(t,[{key:"wipeCanvas",value:function(){this.context.globalCompositeOperation="destination-over",this.context.fillStyle="white",this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.context.globalCompositeOperation="source-over"}},{key:"matchColor",value:function(t,e){return t.r===e.r&&t.g===e.g&&t.b===e.b}},{key:"drawPixel",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{r:0,g:0,b:0},a=i.r,n=i.g,o=i.b;this.context.fillStyle="rgb(".concat(a,",").concat(n,",").concat(o,")"),this.context.fillRect(t,e,this.ratio,this.ratio)}},{key:"getColor",value:function(t,e){var i=this.context.getImageData(t,e,1,1).data;return{r:i[0],g:i[1],b:i[2],a:i[3]}}},{key:"setSquare",value:function(t,e){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{r:0,g:0,b:0},a=e,n=0;n<this.ratio;a+=4*this.canvas.width,n++)for(var o=a;o<a+4*this.ratio;o+=4)t.data[o]=i.r,t.data[o+1]=i.g,t.data[o+2]=i.b,t.data[o+3]=255;return t}},{key:"fill",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{r:0,g:0,b:0,a:1},a=this.getColor(t,e);if(!this.matchColor(a,i)){for(var n,o,s,c,r,h,l=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),u=[[t,e]];u.length;){n=(s=u.pop())[0];for(var d=(c=4*((o=s[1])*this.canvas.width+n))-this.canvas.width*this.ratio*4;o-this.ratio>=0&&this.matchColor(a,{r:l.data[d],g:l.data[d+1],b:l.data[d+2]});)o-=this.ratio,d=(c-=this.canvas.width*this.ratio*4)-this.canvas.width*this.ratio*4;for(r=!1,h=!1;o<this.canvas.height&&this.matchColor(a,{r:l.data[c],g:l.data[c+1],b:l.data[c+2]});){if(l=this.setSquare(l,c,i),n>this.ratio-1){var v={r:l.data[c-4*this.ratio],g:l.data[c-4*this.ratio+1],b:l.data[c-4*this.ratio+2]};this.matchColor(a,v)?r||(u.push([n-this.ratio,o]),r=!0):r&&(r=!1)}if(n<this.canvas.width-this.ratio){var b={r:l.data[c+4*this.ratio],g:l.data[c+4*this.ratio+1],b:l.data[c+4*this.ratio+2]};this.matchColor(a,b)?h||(u.push([n+this.ratio,o]),h=!0):h&&(h=!1)}c+=this.canvas.width*this.ratio*4,o+=this.ratio}}this.context.putImageData(l,0,0)}}},{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,i=arguments.length>2?arguments[2]:void 0;i&&(this.ratio=i),this.canvas.width=t*this.ratio,this.canvas.height=e*this.ratio,this.wipeCanvas()}}]),t}();function g(){var t=Object(n.useContext)(l).color,e=Object(n.useContext)(u).dimensions,i=Object(n.useContext)(h).tool,o=Object(n.useRef)(null),s=Object(n.useState)(null),c=Object(r.a)(s,2),v=c[0],b=c[1];function j(n){var s=function(t,i){var a=o.current,n=a.getBoundingClientRect(),s=n.left+window.scrollX,c=n.top+window.scrollY,r=n.right+window.scrollX,h=n.bottom+window.scrollY,l=Math.trunc((t-s)/(r-s)*a.width/e.ratio)*e.ratio,u=Math.trunc((i-c)/(h-c)*a.height/e.ratio)*e.ratio;return{x:l,y:u}}(n.pageX,n.pageY),c=s.x,r=s.y;switch(i){case a.PENCIL:v.drawPixel(c,r,t);break;case a.FILL:v.fill(c,r,t)}}return Object(n.useEffect)((function(){b(new f(o))}),[]),Object(n.useEffect)((function(){v&&v.init(e.width,e.height,e.ratio)}),[v,e.width,e.height,e.ratio]),Object(d.jsx)("div",{className:"board",children:Object(d.jsx)("canvas",{ref:o,onClick:function(t){return j(t)}})})}i(90);var x=i(81),O=(i(199),["#000000","#FFFFFF","#EB144C","#0693E3","#00D084"]);var m=function(){var t=Object(n.useContext)(l);return Object(d.jsx)(x.a,{color:null===t||void 0===t?void 0:t.color,colors:O,triangle:"hide",width:"356px",onChange:function(e){return null===t||void 0===t?void 0:t.setColor(e.rgb)}})},C=i(25),p=i(46);i(200);function w(){var t=Object(n.useContext)(u),e=t.dimensions,i=t.setDimensions;function a(t){var a=t.target,n=a.name,o=a.value,s=Math.floor(Number(o));s<2?s=2:s>75&&(s=75),i(Object(p.a)(Object(p.a)({},e),{},Object(C.a)({},n,s)))}return Object(d.jsxs)("div",{className:"Dimensions",children:[Object(d.jsx)("input",{name:"width",type:"number",className:"Dimensions-Input",value:e.width,onChange:function(t){a(t)}}),Object(d.jsx)("p",{className:"Dimensions-Separator",children:"x"}),Object(d.jsx)("input",{name:"height",type:"number",className:"Dimensions-Input",value:e.height,onChange:function(t){a(t)}})]})}i(201);var N=i(47);function I(){var t=Object(n.useContext)(h),e=t.tool,i=t.setTool;return Object(d.jsxs)("div",{className:"Tools",children:[Object(d.jsx)("div",{onClick:function(){i(a.PENCIL)},className:e===a.PENCIL?"Tools-Container Tools-Selected":"Tools-Container",children:Object(d.jsx)(N.b,{className:"Tools-Tool"})}),Object(d.jsx)("div",{onClick:function(){i(a.FILL)},className:e===a.FILL?"Tools-Container Tools-Selected":"Tools-Container",children:Object(d.jsx)(N.a,{className:"Tools-Tool"})})]})}var L=function(){return Object(d.jsxs)("div",{className:"ToolBox",children:[Object(d.jsx)(I,{}),Object(d.jsx)(m,{}),Object(d.jsx)(w,{})]})};i(202);var T=function(){var t=Object(n.useState)(a.PENCIL),e=Object(r.a)(t,2),i=e[0],o=e[1],s=Object(n.useState)({r:0,g:0,b:0,a:1}),c=Object(r.a)(s,2),b=c[0],j=c[1],f=Object(n.useState)({width:35,height:25,ratio:30}),x=Object(r.a)(f,2),O=x[0],m=x[1];return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(v,{}),Object(d.jsx)(l.Provider,{value:{color:b,setColor:j},children:Object(d.jsx)(h.Provider,{value:{tool:i,setTool:o},children:Object(d.jsxs)(u.Provider,{value:{dimensions:O,setDimensions:m},children:[Object(d.jsx)(L,{}),Object(d.jsx)(g,{})]})})})]})},F=function(t){t&&t instanceof Function&&i.e(3).then(i.bind(null,205)).then((function(e){var i=e.getCLS,a=e.getFID,n=e.getFCP,o=e.getLCP,s=e.getTTFB;i(t),a(t),n(t),o(t),s(t)}))};c.a.render(Object(d.jsx)(o.a.StrictMode,{children:Object(d.jsx)(T,{})}),document.getElementById("root")),F()},86:function(t,e,i){},87:function(t,e,i){},89:function(t,e,i){},90:function(t,e,i){}},[[203,1,2]]]);
//# sourceMappingURL=main.73d67e5c.chunk.js.map