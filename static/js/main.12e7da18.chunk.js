(this["webpackJsonpsimple-paint"]=this["webpackJsonpsimple-paint"]||[]).push([[0],[,,,,,,,,,,,function(t,i,a){},function(t,i,a){},,function(t,i,a){},function(t,i,a){},function(t,i,a){"use strict";a.r(i);var e=a(1),n=a.n(e),o=a(4),s=a.n(o),r=(a(11),a(2)),h=Object(e.createContext)(null),c=(a(12),a(0));function l(){return Object(c.jsx)("div",{className:"title",children:Object(c.jsx)("h1",{children:"Esteban's Great Simple Paint"})})}var u=a(5),d=a(6),v=function(){function t(i){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:15;Object(u.a)(this,t),this.canvas=void 0,this.width=void 0,this.height=void 0,this.ratio=void 0,this.context=void 0,this.canvas=i.current,this.context=this.canvas.getContext("2d"),this.width=a*n,this.height=e*n,this.ratio=n}return Object(d.a)(t,[{key:"wipeCanvas",value:function(){this.context.globalCompositeOperation="destination-over",this.context.fillStyle="white",this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.context.globalCompositeOperation="source-over"}},{key:"matchColor",value:function(t,i){return t.r===i.r&&t.g===i.g&&t.b===i.b}},{key:"drawPixel",value:function(t,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{r:0,g:0,b:0},e=a.r,n=a.g,o=a.b;this.context.fillStyle="rgb(".concat(e,",").concat(n,",").concat(o,")"),this.context.fillRect(t,i,this.ratio,this.ratio)}},{key:"getColor",value:function(t,i){var a=this.context.getImageData(t,i,1,1).data;return{r:a[0],g:a[1],b:a[2],a:a[3]}}},{key:"setSquare",value:function(t,i){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{r:0,g:0,b:0},e=i,n=0;n<this.ratio;e+=4*this.canvas.width,n++)for(var o=e;o<e+4*this.ratio;o+=4)t.data[o]=a.r,t.data[o+1]=a.g,t.data[o+2]=a.b,t.data[o+3]=255;return t}},{key:"fill",value:function(t,i){for(var a,e,n,o,s,r,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{r:0,g:0,b:0,a:1},c=this.getColor(t,i),l=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),u=[[t,i]];u.length;){a=(n=u.pop())[0];for(var d=(o=4*((e=n[1])*this.canvas.width+a))-this.canvas.width*this.ratio*4;e-this.ratio>=0&&this.matchColor(c,{r:l.data[d],g:l.data[d+1],b:l.data[d+2]});)e-=this.ratio,d=(o-=this.canvas.width*this.ratio*4)-this.canvas.width*this.ratio*4;for(s=!1,r=!1;e<this.canvas.height&&this.matchColor(c,{r:l.data[o],g:l.data[o+1],b:l.data[o+2]});){if(l=this.setSquare(l,o,h),a>this.ratio-1){var v={r:l.data[o-4*this.ratio],g:l.data[o-4*this.ratio+1],b:l.data[o-4*this.ratio+2]};this.matchColor(c,v)?s||(u.push([a-this.ratio,e]),s=!0):s&&(s=!1)}if(a<this.canvas.width-this.ratio){var g={r:l.data[o+4*this.ratio],g:l.data[o+4*this.ratio+1],b:l.data[o+4*this.ratio+2]};this.matchColor(c,g)?r||(u.push([a+this.ratio,e]),r=!0):r&&(r=!1)}o+=this.canvas.width*this.ratio*4,e+=this.ratio}}this.context.putImageData(l,0,0)}},{key:"init",value:function(){this.canvas.width=this.width,this.canvas.height=this.height}}]),t}();a(14);function g(){var t={r:128,g:0,b:0,a:1},i=Object(e.useRef)(null),a=Object(e.useState)(null),n=Object(r.a)(a,2),o=n[0],s=n[1];function h(t,a){var e=i.current,n=e.getBoundingClientRect(),o=n.left+window.scrollX,s=n.top+window.scrollY,r=n.right+window.scrollX,h=n.bottom+window.scrollY;return{x:15*Math.trunc((t-o)/(r-o)*e.width/15),y:15*Math.trunc((a-s)/(h-s)*e.height/15)}}return Object(e.useEffect)((function(){s(new v(i,50,50,15))}),[]),Object(e.useEffect)((function(){o&&(o.init(),o.wipeCanvas())}),[o]),Object(c.jsx)("div",{className:"board",children:Object(c.jsx)("canvas",{ref:i,onClick:function(i){return function(i){var a=h(i.pageX,i.pageY),e=a.x,n=a.y;o.drawPixel(e,n,t)}(i)},onContextMenu:function(i){return function(i){i.preventDefault();var a=h(i.pageX,i.pageY),e=a.x,n=a.y;console.log({x:e,y:n}),null===o||void 0===o||o.fill(e,n,t)}(i)}})})}a(15);var f=function(){var t=Object(e.useState)({r:0,g:0,b:0,a:1}),i=Object(r.a)(t,2),a=i[0],n=i[1];return Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)(l,{}),Object(c.jsx)(h.Provider,{value:{color:a,setColor:n},children:Object(c.jsx)(g,{})})]})},b=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,17)).then((function(i){var a=i.getCLS,e=i.getFID,n=i.getFCP,o=i.getLCP,s=i.getTTFB;a(t),e(t),n(t),o(t),s(t)}))};s.a.render(Object(c.jsx)(n.a.StrictMode,{children:Object(c.jsx)(f,{})}),document.getElementById("root")),b()}],[[16,1,2]]]);
//# sourceMappingURL=main.12e7da18.chunk.js.map